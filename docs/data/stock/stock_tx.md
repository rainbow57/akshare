## [AKShare](https://github.com/akfamily/akshare) 股票数据

### A 股

#### 历史行情数据


##### 历史行情数据-腾讯

接口: stock_zh_a_hist_tx

目标地址: https://gu.qq.com/sh000919/zs

描述: 腾讯证券-日频-股票历史数据; 历史数据按日频率更新, 当日收盘价请在收盘后获取

限量: 单次返回指定沪深京 A 股上市公司、指定周期和指定日期间的历史行情日频率数据

输入参数

| 名称       | 类型  | 描述                                                                   |
| ---------- | ----- | ---------------------------------------------------------------------- |
| symbol     | str   | symbol='sz000001'; 带市场标识                                          |
| start_date | str   | start_date='19000101'; 开始查询的日期                                  |
| end_date   | str   | end_date='20500101'; 结束查询的日期                                    |
| adjust     | str   | 默认返回不复权的数据; qfq: 返回前复权后的数据; hfq: 返回后复权后的数据 |
| timeout    | float | timeout=None; 默认不设置超时参数                                       |

**股票数据复权**

1.为何要复权：由于股票存在配股、分拆、合并和发放股息等事件，会导致股价出现较大的缺口。
若使用不复权的价格处理数据、计算各种指标，将会导致它们失去连续性，且使用不复权价格计算收益也会出现错误。
为了保证数据连贯性，常通过前复权和后复权对价格序列进行调整。

2.前复权：保持当前价格不变，将历史价格进行增减，从而使股价连续。
前复权用来看盘非常方便，能一眼看出股价的历史走势，叠加各种技术指标也比较顺畅，是各种行情软件默认的复权方式。
这种方法虽然很常见，但也有两个缺陷需要注意。

2.1 为了保证当前价格不变，每次股票除权除息，均需要重新调整历史价格，因此其历史价格是时变的。
这会导致在不同时点看到的历史前复权价可能出现差异。

2.2 对于有持续分红的公司来说，前复权价可能出现负值。

3.后复权：保证历史价格不变，在每次股票权益事件发生后，调整当前的股票价格。
后复权价格和真实股票价格可能差别较大，不适合用来看盘。
其优点在于，可以被看作投资者的长期财富增长曲线，反映投资者的真实收益率情况。

4.在量化投资研究中普遍采用后复权数据。

输出参数-历史行情数据

| 名称   | 类型    | 描述         |
| ------ | ------- | ------------ |
| date   | object  | 交易日       |
| open   | float64 | 开盘价       |
| close  | float64 | 收盘价       |
| high   | float64 | 最高价       |
| low    | float64 | 最低价       |
| amount | int64   | 注意单位: 手 |

接口示例-不复权

```python
import akshare as ak

stock_zh_a_hist_tx_df = ak.stock_zh_a_hist_tx(symbol="sz000001", start_date="20200101", end_date="20231027", adjust="")
print(stock_zh_a_hist_tx_df)
```

数据示例-不复权

```
     date   open  close   high    low      amount
0    2020-01-02  16.65  16.87  16.95  16.55  1530231.87
1    2020-01-03  16.94  17.18  17.31  16.92  1116194.81
2    2020-01-06  17.01  17.07  17.34  16.91   862083.50
3    2020-01-07  17.13  17.15  17.28  16.95   728607.56
4    2020-01-08  17.00  16.66  17.05  16.63   847824.12
..          ...    ...    ...    ...    ...         ...
920  2023-10-23  10.59  10.50  10.60  10.43   530404.00
921  2023-10-24  10.54  10.55  10.61  10.44   760653.00
922  2023-10-25  10.51  10.38  10.54  10.36  1411450.00
923  2023-10-26  10.31  10.41  10.42  10.30   599991.00
924  2023-10-27  10.38  10.45  10.48  10.33   919771.00
[925 rows x 6 columns]
```

接口示例-前复权

```python
import akshare as ak

stock_zh_a_hist_tx_df = ak.stock_zh_a_hist_tx(symbol="sz000001", start_date="20200101", end_date="20231027", adjust="qfq")
print(stock_zh_a_hist_tx_df)
```

数据示例-前复权

```
     date   open  close   high    low      amount
0    2020-01-02  15.74  15.96  16.04  15.64  1530231.87
1    2020-01-03  16.03  16.27  16.40  16.01  1116194.81
2    2020-01-06  16.10  16.16  16.43  16.00   862083.50
3    2020-01-07  16.22  16.24  16.37  16.04   728607.56
4    2020-01-08  16.09  15.75  16.14  15.72   847824.12
..          ...    ...    ...    ...    ...         ...
920  2023-10-23  10.59  10.50  10.60  10.43   530404.00
921  2023-10-24  10.54  10.55  10.61  10.44   760653.00
922  2023-10-25  10.51  10.38  10.54  10.36  1411450.00
923  2023-10-26  10.31  10.41  10.42  10.30   599991.00
924  2023-10-27  10.38  10.45  10.48  10.33   919771.00
[925 rows x 6 columns]
```

接口示例-后复权

```python
import akshare as ak

stock_zh_a_hist_tx_df = ak.stock_zh_a_hist_tx(symbol="sz000001", start_date="20200101", end_date="20231027", adjust="hfq")
print(stock_zh_a_hist_tx_df)
```

数据示例-后复权

```
     date     open    close     high      low      amount
0    2020-01-02  1880.18  1904.07  1912.76  1869.33  1530231.87
1    2020-01-03  1911.67  1937.73  1951.85  1909.50  1116194.81
2    2020-01-06  1919.27  1925.79  1955.11  1908.42   862083.50
3    2020-01-07  1932.30  1934.48  1948.59  1912.76   728607.56
4    2020-01-08  1918.19  1881.27  1923.62  1878.01   847824.12
..          ...      ...      ...      ...      ...         ...
920  2023-10-23  1321.10  1311.33  1322.19  1303.73   530404.00
921  2023-10-24  1315.67  1316.76  1323.27  1304.81   760653.00
922  2023-10-25  1312.41  1298.30  1315.67  1296.13  1411450.00
923  2023-10-26  1290.70  1301.56  1302.64  1289.61   599991.00
924  2023-10-27  1298.30  1305.90  1309.16  1292.87   919771.00
[925 rows x 6 columns]
```

#### 历史分笔数据

##### 腾讯财经

接口: stock_zh_a_tick_tx

目标地址: http://gu.qq.com/sz300494/gp/detail(示例)

描述: 每个交易日 16:00 提供当日数据; 如遇到数据缺失, 请使用 **ak.stock_zh_a_tick_163()** 接口(注意数据会有一定差异)

限量: 单次返回最近交易日的历史分笔行情数据

输入参数-历史行情数据

| 名称   | 类型 | 描述              |
| ------ | ---- | ----------------- |
| symbol | str  | symbol="sh600000" |

输出参数

| 名称     | 类型    | 描述         |
| -------- | ------- | ------------ |
| 成交时间 | object  | -            |
| 成交价格 | float64 | 注意单位: 元 |
| 价格变动 | float64 | 注意单位: 元 |
| 成交量   | int32   | 注意单位: 手 |
| 成交额   | int32   | 注意单位: 元 |
| 性质     | object  | 买卖盘标记   |

接口示例

```python
import akshare as ak

stock_zh_a_tick_tx_js_df = ak.stock_zh_a_tick_tx_js(symbol="sz000001")
print(stock_zh_a_tick_tx_js_df)
```

数据示例

```
      成交时间  成交价格  价格变动  成交量  成交额 性质
0     09:25:04  3.45  0.01       4    1380   卖盘
1     09:30:02  3.46  0.01       1     346   买盘
2     09:30:08  3.46  0.00      20    6920   买盘
3     09:30:20  3.46  0.00      28    9688   买盘
4     09:30:23  3.46  0.00      25    8665   买盘
        ...   ...   ...     ...     ...  ..
1405  14:59:29  3.51 -0.02      14    4914   卖盘
1406  14:59:50  3.51  0.00       5    1755   卖盘
1407  14:59:50  3.52  0.01      69   24288   买盘
1408  14:59:59  3.51 -0.01     100   35100   卖盘
1409  15:00:02  3.52  0.01      10    3520   买盘
```

### A+H 股

#### 实时行情数据-腾讯

接口: stock_zh_ah_spot

目标地址: https://stockapp.finance.qq.com/mstats/#mod=list&id=hk_ah&module=HK&type=AH

描述: A+H 股数据是从腾讯财经获取的数据, 延迟 15 分钟更新

限量: 单次返回所有 A+H 上市公司的实时行情数据

输入参数

| 名称 | 类型 | 描述 |
| ---- | ---- | ---- |
| -    | -    | -    |

输出参数

| 名称   | 类型    | 描述        |
| ------ | ------- | ----------- |
| 代码   | object  | -           |
| 名称   | object  | -           |
| 最新价 | float64 | -           |
| 涨跌幅 | float64 | 注意单位: % |
| 涨跌额 | float64 | -           |
| 买入   | float64 | -           |
| 卖出   | float64 | -           |
| 成交量 | float64 | -           |
| 成交额 | float64 | -           |
| 今开   | float64 | -           |
| 昨收   | float64 | -           |
| 最高   | float64 | -           |
| 最低   | float64 | -           |

接口示例

```python
import akshare as ak

stock_zh_ah_spot_df = ak.stock_zh_ah_spot()
print(stock_zh_ah_spot_df)
```

数据示例

```
        代码       名称   最新价   涨跌幅   涨跌额  ...          成交额    今开    昨收    最高    最低
0    00525   广深铁路股份  1.66 -0.60 -0.01  ...  18427959.54  1.67  1.67  1.69  1.63
1    01618     中国中冶  1.59 -1.85 -0.03  ...  11468956.78  1.62  1.62  1.63  1.59
2    02727     上海电气  1.54  0.00  0.00  ...  12801574.00  1.54  1.54  1.57  1.53
3    03369     秦港股份  1.49  0.00  0.00  ...   6051885.00  1.49  1.49  1.58  1.48
4    03678     弘业期货  1.41 -0.70 -0.01  ...   1871710.00  1.43  1.42  1.44  1.41
..     ...      ...   ...   ...   ...  ...          ...   ...   ...   ...   ...
155  06806     申万宏源  1.39 -1.42 -0.02  ...   4312447.20  1.41  1.41  1.42  1.39
156  00991     大唐发电  1.24 -2.36 -0.03  ...  29927046.00  1.26  1.27  1.27  1.23
157  00323  马鞍山钢铁股份  1.22 -0.81 -0.01  ...   2345447.26  1.23  1.23  1.25  1.22
158  01635     大众公用  1.20  0.84  0.01  ...    371140.00  1.20  1.19  1.20  1.19
159  01375     中州证券  1.11 -1.77 -0.02  ...   4867240.00  1.13  1.13  1.13  1.09
[160 rows x 13 columns]
```


#### 历史行情数据

接口: stock_zh_ah_daily

目标地址: https://gu.qq.com/hk02359/gp

描述: 腾讯财经-A+H 股数据

限量: 单次返回指定参数的 A+H 上市公司的历史行情数据

输入参数

| 名称       | 类型 | 描述                                                                      |
| ---------- | ---- | ------------------------------------------------------------------------- |
| symbol     | str  | symbol="02318"; 港股股票代码, 可以通过 **ak.stock_zh_ah_name()** 函数获取 |
| start_year | str  | start_year="2000"; 开始年份                                               |
| end_year   | str  | end_year="2019"; 结束年份                                                 |
| adjust     | str  | adjust=""; 默认为空不复权; 'qfq': 前复权, 'hfq': 后复权                   |

输出参数

| 名称   | 类型    | 描述 |
| ------ | ------- | ---- |
| 日期   | object  | -    |
| 开盘   | float64 | -    |
| 收盘   | float64 | -    |
| 最高   | float64 | -    |
| 最低   | float64 | -    |
| 成交量 | float64 | -    |

接口示例

```python
import akshare as ak

stock_zh_ah_daily_df = ak.stock_zh_ah_daily(symbol="02318", start_year="2022", end_year="2024", adjust="")
print(stock_zh_ah_daily_df)
```

数据示例

```
     日期         开盘   收盘     最高     最低    成交量
0    2022-01-03  56.80  55.75  56.95  55.60   7231921.0
1    2022-01-04  55.95  56.50  56.95  55.75  17975862.0
2    2022-01-05  57.50  56.80  58.00  56.60  28768656.0
3    2022-01-06  56.90  58.00  58.00  56.90  15464523.0
4    2022-01-07  58.00  61.10  61.10  57.55  46904651.0
..          ...    ...    ...    ...    ...         ...
753  2024-01-23  30.00  31.30  31.85  29.60  69397766.0
754  2024-01-24  31.75  33.00  33.35  31.10  79928025.0
755  2024-01-25  33.50  34.60  34.75  32.85  86827346.0
756  2024-01-26  34.15  33.75  34.70  33.35  56539336.0
757  2024-01-29  34.05  33.85  34.90  33.75  41424070.0
[758 rows x 6 columns]
```

#### A+H 股票字典

接口: stock_zh_ah_name

目标地址: https://stockapp.finance.qq.com/mstats/#mod=list&id=hk_ah&module=HK&type=AH

描述: A+H 股数据是从腾讯财经获取的数据, 历史数据按日频率更新

限量: 单次返回所有 A+H 上市公司的代码和名称

输入参数

| 名称 | 类型 | 描述 |
| ---- | ---- | ---- |
| -    | -    | -    |

输出参数

| 名称 | 类型   | 描述 |
| ---- | ------ | ---- |
| 代码 | object | -    |
| 名称 | object | -    |

接口示例

```python
import akshare as ak

stock_zh_ah_name_df = ak.stock_zh_ah_name()
print(stock_zh_ah_name_df)
```

数据示例

```
     代码        名称
0    01211     比亚迪股份
1    06160      百济神州
2    01880      中国中免
3    00941      中国移动
4    06821       凯莱英
..     ...       ...
144  01053    重庆钢铁股份
145  00588  北京北辰实业股份
146  02009      金隅集团
147  02880      辽港股份
148  01033     中石化油服
[149 rows x 2 columns]
```
